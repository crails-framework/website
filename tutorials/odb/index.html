<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <title>Crails Framework - ODB Advanced</title>
    <link rel="stylesheet" href="../../css/application.css">
    <link rel="stylesheet" href="../../css/code-qtcreator.css">
    <script src="../../highlight.pack.js"></script>
    <script src="../../js/index.js"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="Nanoc 4.12.11">
  </head>
  <body>
    <div id="header">
      <img class="logo" src="../../images/logo.png">
      <h1>Crails Framework</h1>
      <ul class="main-menu">
        <li><a href="../../">Home</a></li><li>
            <a href="../../getting-started">Getting started</a></li><li>
            <a href="..">Tutorials</a></li><li>
	    <a href="https://github.com/crails-framework/crails" target="_blank">GitHub</a></li>
      </ul>
    </div>
    <div id="content-wrapper">
      <div id="main">
        <div id="with-index"></div>

<h2>1. Introduction</h2>

<p>
  This here is a draft. Nothing much to see.
</p>

<h2>2. Querying</h2>

<h3>2.1 Using ANY</h3>

<p>
  The <code>crails/odb/any.hpp</code> header includes a helper to quickly create
  requests using the <code>ANY</code> command:
</p>

<pre><code class="language-cpp">#include &lt;crails/odb/any.hpp&gt;

void querying_by_ids(odb::result&lt;Model&gt;&amp; models, const std::vector&lt;Crails::Odb::id_type&gt;&amp; id_list)
{
  Crails::Odb::Connection database;
  odb::result&lt;Model&gt; models;
  auto query = odb::query&lt;Model&gt;::id + "=" + Crails::Odb::any(id_list);

  database.find(models, query);
}
</code></pre>

<p>
  Note that we're building custom queries here, so you should be wary about SQL injections when using
  such commands.
</p>

<p>
  If needed, you may also explicitely specify the SQL array type:
</p>

<pre><code class="language-cpp">odb::query&lt;Model&gt;::id + "=" + Crails::odb::any(id_list, "int");
</code></pre>

      </div>
    </div>
    <div id="footer">
      This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.<br>
      It is a modified version of the <a href="https://guides.rubyonrails.org/">Ruby on Rails guides</a>, amended and completed to fit Crails development.
    </div>
    <script>hljs.initHighlightingOnLoad();</script>
  

</body></html>